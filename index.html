<!DOCTYPE html>
<html>
    <head>
        <title>TEST MATRIX</title>
        <link rel="stylesheet" href="style.css">
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <script type="text/javascript" src="utils.js"></script>
        <script type="text/javascript" src="matrix.js" defer></script>
        <script type="text/javascript" src="scatter_plot.js" defer></script>
        <script type="text/javascript" src="tabs.js" defer></script>
        <script type="text/javascript" src="main.js" defer></script>
    </head>
    <body>
        <div style="position: relative">
            <h1>Decathlon data browser</h1>
        </div>
        <div id="matrix-div" style="position: relative; width: auto; height: 740px">
            <aside id="qselections">
                <!--<h2 style="margin-top: 0px"><u>Quick Selections</u></h2>-->
                <h3>Behavior Groups</h3>
                <div id="behavior-selection-div"></div>
                <h3>Assays</h3>
                <div id="assay-selection-div"></div>
            </aside>
            <div id="metric-select-parent">
                <div id="metric-select-buttons">
                    <div class="inactive">Select Group</div>
                    <div class="inactive">Deselect Group</div>
                </div>
                <div id="metric-selection-scroll-par">
                    <div id="metric-selections"></div>
                </div>
                <div id="metric-selections-shift-click-instuct">
                    <i><b>shift + click</b> to toggle multiple behaviors</i>
                </div>
            </div>
            <div id="matrix-header">
                <!--
                <div style="display: inline-block; width: auto; height: 100%; font-size: 10.5px;
                    vertical-align: top; position: absolute; right: 265px">
                    <div style="display: block"><i>Add behaviors: click + drag</i></div>
                    <div style="display: block"><i>Remove behaviors: shift-click</i></div>
                </div>
            -->
                <span>Select dataset:</span>
                <select></select>
                <div id="clear-selections" class="inactive">Clear All Selections</div>
            </div>
            <aside id="instructions">
                <h2 style="margin-top: 0px"><u>Instructions</u></h2>
                <ol style="padding-left: 0px; margin-top: 15px; font-size: 12px;">
                    <li>Individual elements in the matrix 
                        correspond to the pairwise correlations between 
                        behavioral metrics.
                    </li>
                    <li>
                        <b><i>Click + drag</i></b> or <b><i>Shift-click+drag</i></b>
                        in the matrix or use the <b>Behavior Groups</b> and <b>Assays</b> 
                        quick selection groupings to select/deselect behavioral metrics.
                    </li>
                    <li>
                        Left-click individual elements to see scatter plots of the
                        individual behavioral metric pairs.
                    </li>
                    <li>
                        Left-click individual elements to see scatter plots of the
                        individual behavioral metric pairs.
                    </li>
                </ol>
            </aside>
            <div id="colorbar"></div>
            <div id="svg-container"></div>
        </div>
        <div id="tab-div" style="width: auto; height: 800px">
            <ul style="width: 100%; height: 31px; margin: 0; padding: 0; border-bottom: 1px solid black;">
                <li class="active">Metric Loadings</li
                ><li class="inactive">Metric Summary</li
                ><li class="inactive">Gene Search</li
                ><li class="inactive">Enrichment Categories</li>
            </ul>
            <div class="tab-parent" id="metric-loadings-tab">
                <div id="tab-header" style="margin-left: 70px">
                    <div style="display: inline-block">
                        <div style="display: block">
                            <span style="margin-right: -10px; display: inline-block">Metric group:</span>
                            <select style="display: inline-block"></select>
                        </div>
                        <div class="buttons" style="display: block; margin-top: 10px">
                            <div class="inactive" style="display: inline-block">Deselect Group</div>
                            <div class="inactive" style="display: inline-block">Select Group</div>
                        </div>
                    </div>
                    <h2 style="position: absolute; left: 662px; text-anchor: middle">Activity PC</h2>
                </div>
                <div class="tab-content"></div>
            </div>
            <div class="tab-parent" id="metric-summary-tab" style="visibility: hidden">
                <div class="tab-content">
                    <div style="margin: 40px 50px 0px 50px">
                        <h2>Metric Summary</h2>
                        <hr style="border: 1px solid #6d6d6d">
                        <div display="inline-block" style="width: 50%; height: 100%; margin: 0px; float: left">
                            <table style="width: 100%; height: 100%">
                                <tr>
                                    <th colspan="2" style="width: 100%; height: auto">
                                        <span>Select metric: &nbsp;</span>
                                        <select id="metric-summary-tab-select" style="margin: 20px 0px 20px 0px; padding: 0px;"></select>
                                    </th>
                                </tr>
                            </table>
                        </div>
                        <div id="metric-summary-plot-div">
                            <div id="hist-div">
                            </div>
                            <div id="scree-plot">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-parent" id="gene-search-tab" style="visibility: hidden">
                <div class="tab-content">
                    <div style="margin: 40px 50px 0px 50px">
                        <h2>Gene Search</h2>
                        <hr>
                        <p style="margin-bottom: 40px">Search genes by entering a valid gene identifiers (Gene Symbol, FlyBase gene number, or KEGG-ID) into the box below.
                                    For example, to search for Notch enter: "N", "FBgn0004647", or "Dmel_CG3936".
                                    To search multiple entries simultaneously, separate identifiers by a space or newline (no commas or other delimiters).</p>
                        <div style="display: inline-block; width: 20%; vertical-align: top">
                            <div>
                                <label for="gene-search-textbox" style="display: block">Enter gene identifier(s):</label>
                                <textarea id="gene-search-textbox" class="scroll-div" placeholder="Gene ID"
                                rows="8" spellcheck="false" style="width: 224px; font-family: Courier New,Courier,Lucida Sans Typewriter,Lucida Typewriter,monospace;"></textarea>
                                <div class="buttons" style="width: 100%; text-align: right">
                                    <form id="import-form" method="POST" enctype="multipart/form-data" style="visibility: hidden; width: 0px; height: 0px">
                                        <input id='fileid' type='file' name='filename' style="width: 0px; margin: 0px; padding: 0px; visibility: hidden"/>
                                    </form>
                                    <div class="inactive" id="gene-search-import">Import File</div>
                                    <div class="inactive" id="gene-search-submit">Submit</div>
                                </div>
                                
                                <label for="gene-result-textbox" style="display: block; margin-top: 20px">Valid matching identifier(s):</label>
                                <div id="gene-result-textbox" class="scroll-div" style="height: 300px; width: 224px; font-family: Courier New,Courier,Lucida Sans Typewriter,Lucida Typewriter,monospace;"></div>
                            </div>
                        </div>
                        <div style="display: inline-block; width: 40%; vertical-align: top; padding: 0px 30px 0px 65px">
                                <p style="margin: 0px; font-weight: 500">Summary</p>
                                <hr style="margin: 0px;">
                                <table style="font-size: 14px">
                                </table>
                        </div>
                        <div style="float: right">
                            <div id="gene-search-results-div" style="display: block">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-parent" id="enrichment-tab" style="visibility: hidden">
                    <div class="tab-content">
                        <div style="margin: 40px 50px 0px 50px">
                            <h2>Gene Enrichment Categories</h2>
                            <hr>
                            <p style="margin-bottom: 40px">Enter a description of how to use the tab here.</p>
                            <div style="display: inline-block; width: 40%; vertical-align: top">
                                <table style="width: 100%; height: 100%">
                                    <tr>
                                        <th colspan="2" style="width: 100%; height: auto">
                                            <span>Select category: &nbsp;</span>
                                            <select id="enrichment-tab-select" style="margin: 0px 0px 20px 0px; padding: 0px;"></select>
                                        </th>
                                    </tr>
                                </table>
                            </div>
                            <div style="display: block; width: 100%; padding: 10px 0px 0px 0px">
                                <table id='enrichment-tab-parent-table' style="width: 100%; height: 100%">
                                    <tr>
                                        <th style="width: 33.3%">
                                            <div style="font-weight: 100">
                                                Category Metrics:
                                            </div>
                                            <table id="cat-metrics" class="scroll-table">
                                                <tr>
                                                    <th>Name</th>
                                                    <th><i>p</i>-value</th>
                                                </tr>
                                            </table>
                                        </th>
                                        <th style="width: 33.3%">
                                            <div style="font-weight: 100">
                                                Category Gene Hits:
                                            </div>
                                            <table id="cat-hits" class="scroll-table">
                                                <tr>
                                                    <th>Name</th>
                                                    <th><i>p</i>-value</th>
                                                </tr>
                                            </table>
                                        </th>
                                        <th style="width: 33.3%">
                                            <div style="font-weight: 100">
                                                Category All Genes:
                                            </div>
                                            <table id="cat-genes" class="scroll-table">
                                                <tr>
                                                    <th>Name</th>
                                                    <th><i>p</i>-value</th>
                                                </tr>
                                            </table>
                                        </th>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div style="display: block; width: 100%; height: 20px; position: absolute; bottom: 0px">
            <span></span>
        </div>
    </body>
</html>
